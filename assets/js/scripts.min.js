"use strict";function Accordion(t){var e={catList:".catList",dropdown:".catDropdown",catLink:".catLink"},i=function(){e=$.extend(e,t)};return this.test=function(t){return console.log(t)},this.setComponents=function(){this.categories=this.flt.find(e.catList+" > *"),this.catLink=this.categories.find(e.catLink),this.dropdownItems=this.categories.find(e.dropdown)},this.onDropdownClick=function(){var t;this.catLink.on("click",function(i){i.stopPropagation();var n,s,o,r;n=$(this).parent(),s=n.find(e.dropdown),o=s.outerHeight(!0),r=n.outerHeight(!0),n.hasClass("is-active")?(console.log(i.currentTarget),n.animate({height:t},500,function(){n.css("height","auto"),s.css({display:"none"})})):(t=n.outerHeight(!0),n.css("height",t),s.css({display:"block"}),n.animate({height:t+o},500,function(){n.css("height","auto")})),n.hasClass("has-dropdown")&&n.toggleClass("is-active")})},this.setItemWithDropdown=function(){var t,i,n;i=this.categories;for(var s in i)n=i.eq(s),t=n.find(e.dropdown),t.length>0&&n.addClass("has-dropdown");this.onDropdownClick()},this.init=function(){i();var t=e.selector;this.flt=$(t),this.flt.length>0&&(this.setComponents(),this.setItemWithDropdown())},this}function Catalogue(t){var e={switchers:"[data-layout-switcher]",itemsContainer:".itemsContainer",itemsCounter:".itemsCounter",grid:{xl:3,lg:2},loadButton:".loadButton",visibleRows:2,step:1,showText:"Показать больше товаров",hideText:"Свернуть",list:{columns:1,visible:3,step:3},block:{columns:2,visible:2,step:1}},i=function(){e=$.extend(e,t)};return this.test=function(t){return console.log(t)},this.setComponents=function(){this.switchers=this.ctl.find(e.switchers),this.container=this.ctl.find(e.itemsContainer),this.itemsCounter=this.ctl.find(e.itemsCounter),this.items=this.container.children(),this.loadButton=this.ctl.find(e.loadButton)},this.setCounter=function(){var t=this.items.length;this.itemsCounter.text(t)},this.setItem=function(t){var i,n,s;return s=window.innerWidth,i=s>1440?e.grid.xl:s>640&&1440>=s?e.grid.lg:1,i="list"===t?1:i,n=100/i,n+="%",this.items.css("width",n),i},this.onSwitcherClick=function(){var t=this;this.switchers.on("click",function(){var i,n,s,o,r;s="is-active",n=$(this),i=n.data("layout-switcher"),n.hasClass(s)||(o=t.switchers.closest("."+s),o.removeClass(s),r=o.data("layout-switcher")+"-mode",t.container.removeClass(r).addClass(i+"-mode"),n.addClass(s),t.columns=t.setItem(i),t.setLoader(e[i]))})},this.setLayout=function(){var t,e,i;return t=this.switchers.closest(".is-active"),e=t.index(),i=t.data("layout-switcher"),this.container.addClass(i+"-mode"),this.columns=this.setItem(i),this.onSwitcherClick(),i},this.hideItems=function(t,e){var i,n,s;i=t*e,n=this.items.length;for(var o=0;n>o;o++){var r=this.items.eq(o);r.hasClass("is-hidden")&&r.removeClass("is-hidden")}for(var o=i;n>o;o++)this.items.eq(o).addClass("is-hidden");s=e*this.items.eq(0).outerHeight(!0),this.container.css("height",s)},this.onLoaderClick=function(t,i,n){var s,o,r,a=this;s=this.container.outerHeight(!0),r=this.container.offset().top,o=this.items.length%n,this.loadButton.on("click",function(){var c,l,h,d,u;if(c=a.items.closest(".is-hidden"),l=c.index(),d=a.container.outerHeight(!0),a.container.css("height",d),u=c.length>i?d+i*a.items.eq(1).outerHeight(!0):d+o*a.items.eq(1).outerHeight(!0),c.length>=e.step){a.container.animate({height:u},500),h=l+t*i;for(var p=l;h>p;p++)a.items.eq(p).removeClass("is-hidden");var f=a.items.closest(".is-hidden");0===f.length&&a.loadButton.text(e.hideText)}else $("body,html").animate({scrollTop:r-100},500),a.container.animate({height:s},500,function(){a.hideItems(t,n),a.loadButton.text(e.showText)})})},this.setLoader=function(t){this.hideItems(t.columns,t.visible),this.loadButton.off("click"),this.onLoaderClick(t.columns,t.step,t.visible)},this.init=function(){i();var t=e.selector;if(this.ctl=$(t),this.ctl.length>0){var n;this.setComponents(),this.setCounter(),n=this.setLayout(),this.setLoader(e[n])}},this}function GlobalDropdown(t){this.menu=$(t.menu),this.menuitem=this.menu.find(t.menuitem),this.dropdown=$(t.dropdown),this.copyMenu="undefined"==typeof t.copyMenu?!0:t.copyMenu,this.hide=!1,this.exists=0!==this.menu.length&&0!==this.menuitem.length&&0!==this.dropdown.length}function MobileMenu(t){var e={closeLinkCls:".closeMenuLink"},i=function(){e=$.extend(e,t)};return this.setComponents=function(){this.openLink=$(e.openLinkCls),this.closeLink=this.menu.find(e.closeLinkCls),this.body=$("body")},this.openMenu=function(){this.menu.addClass("is-active"),this.body.addClass("no-overflow")},this.closeMenu=function(){this.menu.removeClass("is-active"),this.body.removeClass("no-overflow")},this.onIconOpenClick=function(){var t=this;this.openLink.on("click",function(){t.openMenu()})},this.onIconCloseClick=function(){var t=this;this.closeLink.on("click",function(){t.closeMenu()})},this.init=function(){i();var t=e.menuCls;this.menu=$(t),this.menu.length>0&&(this.menu.hasClass("is-active")&&this.menu.removeClass("is-active"),this.setComponents(),this.onIconOpenClick(),this.onIconCloseClick())},this}var filter=new Accordion({selector:".filter"}),headerAccordion=new Accordion({selector:"#header .mobileMenu"}),footerAccordion=new Accordion({selector:".footerMenu"}),categoriesAccordion=new Accordion({selector:".categoriesMobile"}),categoriesWrapper=new Accordion({selector:".categoriesWrapper",catList:".categoriesWrapperList",dropdown:".categoriesWrapperDropdown",catLink:".categoriesWrapperLink"});filter.init(),headerAccordion.init(),footerAccordion.init(),categoriesAccordion.init(),categoriesWrapper.init(),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.onBarClick=e(this.onBarClick,this),this.onTouchend=e(this.onTouchend,this),this.onTouchstart=e(this.onTouchstart,this),this.onMouseup=e(this.onMouseup,this),this.onMousedown=e(this.onMousedown,this),this.setControllerPosition=e(this.setControllerPosition,this);var i,n,s,o,r,a,c,l;for(this.calculator=t.calculator,this.elements={},r=["control","progress","bar","info","pricing","scale","header"],i=0,s=r.length;s>i;i++)l=r[i],this.elements[l]=this.calculator.find('[data-type="'+l+'"]');for(this.elements.draggable=null,this.elements.touchable=null,this.fields={},this.fieldNames=["bonus","sales","gain"],a=this.fieldNames,n=0,o=a.length;o>n;n++)l=a[n],this.fields[l]=this.elements.pricing.find('[data-value="'+l+'"] span[data-price]');this.settings=t.settings,this.settings.period=this.settings.sum/this.settings.step,this.settings["default"]=0,this.settings.bonus=this.settings["default"]*this.settings.cost,0!==this.calculator.length&&(this.init(),c=function(){},$(window).resize(function(t){return function(){var t;return t=new Date,null}}(this)))}return t.prototype.initHeader=function(){return this.calculator.append('<div data-type="header"></div>')},t.prototype.initScale=function(){var t,e,i;for(t=0,e=[];t<=this.settings.mark;)this.elements.scale.append('<div data-type="mark"></div>'),i=t*this.settings.sum/this.settings.mark,this.elements.scale.find('[data-type="mark"]:nth-child('+(t+1)+")").text(i),e.push(t++);return e},t.prototype.initElements=function(){return this.initScale()},t.prototype.setPosition=function(){var t;return this.position={},t=2*Number(this.elements.bar.css("border-width").replace("px","")),this.position={control:{x:this.elements.control.offset().left,w:this.elements.control.outerWidth()},bar:{w:this.elements.bar.outerWidth()}},this.position.bar.wmax=this.position.bar.w-this.position.control.w-t,this.position},t.prototype.calcControllerPosition=function(t){var e;return e=void 0===t?0:t-this.position.control.x-this.position.control.w/2,this.posx=e>0&&e<this.position.bar.wmax?e:0>=e?0:this.position.bar.wmax,this.posx},t.prototype.setEventType=function(t){var e;return e="touchmove"===t.type?t.originalEvent.touches[0].pageX:t.pageX,this.calcControllerPosition(e)},t.prototype.setControllerPosition=function(t){var e;return e=this.setEventType(t),this.elements.control.css("left",e),this.elements.progress.css("width",e+this.position.control.w/2),this.posx},t.prototype.setPeriod=function(){var t;for(this.periods=[0],t=1;t<=this.settings.period;)this.periods.push(t*this.position.bar.wmax/this.settings.period),t++;return this.periods},t.prototype.calcPeriod=function(){return this.setPeriod(),this.periods.forEach(function(t){return function(e,i,n){return t.posx>n[i]&&t.posx<n[i+1]?(t.elements.info.text((i+1)*t.settings.step+t.settings.info),t.settings.val=(i+1)*t.settings.step):0===t.posx?(t.elements.info.text(t.settings["default"]+t.settings.info),t.settings.val=0):t.posx===t.position.bar.wmax?t.elements.info.text(t.settings.step*(t.periods.length-1)+t.settings.info):void 0}}(this))},t.prototype.setPriceDefaults=function(){var t,e,i,n;for(this.prices={},i=this.fieldNames,t=0,e=i.length;e>t;t++)n=i[t],this.prices[n]=this.fields[n].data("price"),""===this.prices[n]&&(this.prices[n]=this.settings[n]);return this.prices.gain=this.prices.sales+this.prices.bonus},t.prototype.fillFieldsDefault=function(){var t,e,i,n,s;for(this.elements.info.text(this.settings["default"]+this.settings.info),i=this.fieldNames,n=[],t=0,e=i.length;e>t;t++)s=i[t],n.push(this.fields[s].text(this.prices[s]));return n},t.prototype.calcPrices=function(){return this.calcPeriod(),this.prices.bonus=this.settings.val*this.settings.cost,this.fields.bonus.text(this.prices.bonus),this.prices.gain=this.prices.sales+this.prices.bonus,this.fields.gain.text(this.prices.gain)},t.prototype.onMousemove=function(){return $("body").on("mousemove",function(t){return function(e){return t.elements.draggable?(t.elements.control=t.elements.draggable,t.setControllerPosition(e),t.calcPrices()):void 0}}(this))},t.prototype.onMousedown=function(){return $("body").on("mousedown",'[data-type="control"]',function(t){return function(e){return t.elements.draggable=$(e.target)}}(this))},t.prototype.onMouseup=function(){return $("body").on("mouseup",function(t){return function(e){return t.elements.draggable=null}}(this))},t.prototype.onTouchmove=function(){return $("body").on("touchmove",function(t){return function(e){return t.elements.touchable?(t.elements.control=t.elements.touchable,t.setControllerPosition(e),t.calcPrices()):void 0}}(this))},t.prototype.setMouseEvents=function(){return this.onMousemove(),this.onMousedown(),this.onMouseup()},t.prototype.onTouchstart=function(){return $("body").on("touchstart",'[data-type="control"]',function(t){return function(e){return t.elements.touchable=$(e.target)}}(this))},t.prototype.onTouchend=function(){return $("body").on("touchend",function(t){return function(e){return t.elements.touchable=null}}(this))},t.prototype.setTouchEvents=function(){return this.onTouchmove(),this.onTouchstart(),this.onTouchend()},t.prototype.onBarClick=function(){return this.elements.bar.click(function(t){return function(e){return t.setControllerPosition(e),t.calcPrices()}}(this))},t.prototype.makeController=function(){return this.setMouseEvents(),this.setTouchEvents(),this.onBarClick()},t.prototype.onResize=function(){return $(window).resize(function(t){return function(e){var i;return i=t.setControllerPosition(e),null}}(this))},t.prototype.init=function(){return this.initElements(),this.setPosition(),this.calcControllerPosition(),this.makeController(),this.setPriceDefaults(),this.fillFieldsDefault(),this.onResize()},t}(),$(function(){var e;return e=new t({calculator:$("#js-calc"),settings:{step:1,sum:100,mark:4,cost:2,sales:1e3,info:" percents"}})})}.call(void 0);var catalogue=new Catalogue({testinput:"hello world",selector:".catalogue"});catalogue.init(),GlobalDropdown.prototype={constructor:GlobalDropdown,copyMenuToDropdown:function(){var t,e;t=this.menu.find("[data-dropdown-link]"),e=t.clone(),e.appendTo(this.dropdown)},onMouseenter:function(t){t.removeClass("is-active"),this.dropdown.removeClass("is-active"),$.each(this.menuitem,function(t,e){$(e).removeClass("is-active")}),$.each($("[data-dropdown-link]"),function(t,e){$(e).removeClass("is-active")}),this.dropdown.addClass("is-active"),t.addClass("is-active");var e=t.data("menu-link"),i=this.dropdown.find('[data-dropdown-link="'+e+'"]');i.addClass("is-active")},onMouseleave:function(){this.dropdown.on("mouseenter",function(){this.hide=!1}),this.dropdown.removeClass("is-active");var t=this.dropdown.find(".is-active");t.removeClass("is-active"),$.each(this.menuitem,function(t,e){$(e).removeClass("is-active")})},onMousemove:function(t,e){var i=this;$("body").on("mousemove",function(e){var n=$(e.target);0===n.closest(t).length&&0===n.closest(i.dropdown).length&&i.onMouseleave()})},setHover:function(){var t=this.menuitem,e=this;t.on("mouseenter",function(i){var n=$(i.currentTarget);e.onMouseenter(n),e.onMousemove(t,name)})},initialize:function(){this.copyMenu&&this.copyMenuToDropdown(),this.setHover()}};var dropdownMain=new GlobalDropdown({menu:"#header .headerMenu",menuitem:"[data-menu-link]",dropdown:"#header .dropdownMenu"});dropdownMain.initialize(),$(document).ready(function(){!function(t){var e=$(t),i=e.find(".menuLink");i.hasClass("hasDropdown");e.css("position","relative");var n=function(t){var i;t.on("mouseenter",function(){var n=$(this).find(".dropdownNav");i=n.clone(),i.appendTo("body").addClass("is-active");var s=t.outerHeight(!0)+t.offset().top+20,o=(e.outerWidth(),e.offset().left);i.css({right:o,top:s,left:o})})},s=function(){n(i)};s()}(".headerMenuContainer")}),$(document).ready(function(){!function(t,e,i,n){var s,o,r,a,c,l,h;h=!0,s=$(t),o=s.length,r=$(".items-loader"),a=r.html(),c=$(".loading-container");for(var d=0;e>d;d++)$(s[d]).addClass("is-active");for(var d=e;o>d;d++)$(s[d]).hide();r.click(function(){var d,u,p,f;if(u="Скрыть всё",d=$(t+':not(".is-active")'),h&&(l=c.outerHeight()),0!==d.length){h=!1,r.addClass("loading"),p=c.outerHeight(),f=p+$(d[0]).outerHeight(),c.animate({height:f},400),setTimeout(function(){r.removeClass("loading")},n*(i+1));for(var m=0;i>m;m++)!function(t){setTimeout(function(){$(d[t]).addClass("is-active").fadeIn(),d.length<=i&&r.text(u)},(t+1)*n)}(m)}else{h=!0,r.html(a),c.animate({height:l},400);for(var m=e;o>m;m++)$(s[m]).hide().removeClass("is-active")}})}("#popular-item",3,3,800)});var mobileHeaderMenu=new MobileMenu({menuCls:"#header .mobileMenu",openLinkCls:"#header .openMenuLink"});mobileHeaderMenu.init(),$(document).ready(function(){function t(t){var e,i,n,s,o,r;e=$(t.searchBoxId),i=$(t.searchFieldId),n=$(t.searchButtonId),s=$(t.searchContainerId),n.click(function(){e.hasClass("is-active")?i.animate({width:0},400,"swing",function(){e.animate({left:r-o},function(){$(this).removeClass("is-active")})}):(o=s.offset().left,r=e.offset().left,e.addClass("is-active").css("left",r-o).animate({left:0},400,"swing",function(){i.animate({width:485},400)}))})}var e,i;e={searchBoxId:"#search-box",searchFieldId:"#search-field",searchButtonId:"#search-button",searchContainerId:"#search-container"},i={searchBoxId:"#sh-search-box",searchFieldId:"#sh-search-field",searchButtonId:"#sh-search-button",searchContainerId:"#sh-search-container"},t(e),t(i)}),$(document).ready(function(){var t;t=$("select").select2({minimumResultsForSearch:1/0})}),$(document).ready(function(){!function(t){var e;return e={pager:!1,controls:!0,nextText:"",prevText:"",responsive:!0},t.forEach(function(t){var i,n,s,o;n="#"+t+"-slider",s="#"+t+"-slider-prev",o="#"+t+"-slider-next",i={prevSelector:s,nextSelector:o};for(var r in e)i[r]=e[r];("inst"===t||"catalogue"===t)&&(i.minSlides=5,i.maxSlides=5,i.moveSlides=1,i.slideMargin=20,i.slideWidth=220),"quotes"===t&&(i.adaptiveHeight=window.innerWidth<960?!0:!1),$(n).length>0&&$(n).bxSlider(i)}),function(){var t,i,n,s;t="#inst-slider",i="#inst-slider-prev",n="#inst-slider-next",s={prevSelector:i,nextSelector:n};for(var o in e)s[o]=e[o];s.moveSlides=1,s.slideMargin=20;var r=Object.assign({minSlides:1,maxSlides:1,slideWidth:0},s),a=Object.assign({minSlides:3,maxSlides:3,slideWidth:220},s),c=Object.assign({minSlides:5,maxSlides:5,slideWidth:220},s);if($(t).length>0){var l,h=function(e){return $(t).bxSlider(e)},d=window.innerWidth<960&&window.innerWidth>640,u=window.innerWidth<640;l=h(d?a:u?r:c),enquire.register("screen and (min-width: 960px)",{match:function(){l.reloadSlider(c)}}),enquire.register("screen and (min-width: 640px) and (max-width: 960px)",{match:function(){l.reloadSlider(a)}}),enquire.register("screen and (max-width: 640px)",{match:function(){l.reloadSlider(r)}})}}(),function(){function t(t){var e,i,n,o;e=$(s[t]),i=e.find("img"),n=i.data("full-img-path"),o=i.attr("title"),r.attr("src",n),a.attr("href",n).attr("data-title",o)}function e(){for(var e=0;e<s.length;e++)if($(s[e]).hasClass("is-active")){var i=e;t(i)}}function i(){s.click(function(e){var i,n;i=$(this),i.hasClass("is-active")||($('[data-item-slider="thumb"].is-active').removeClass("is-active"),i.addClass("is-active"),n=i.index(),t(n))})}function n(){lightbox.option({fadeDuration:100})}var s,o,r,a;o=$('[data-item-slider="preview"]'),r=o.find("img"),a=o.find("a"),s=$('[data-item-slider="thumb"]'),function(){e(),i(),n()}()}(),!1}(["news","quotes","catalogue"]);var t=function(t,e,i){var n,s,o,r,a;if(s={pager:!1,prevSelector:e,nextSelector:i,nextText:"",prevText:""},a=Object.assign({minSlides:2,maxSlides:2,slideWidth:460,slideMargin:20},s),o=Object.assign({minSlides:2,maxSlides:2,slideWidth:400,slideMargin:20},s),r=Object.assign({minSlides:1,maxSlides:1,slideWidth:0},s),$(t).length>0){var c=function(e){return $(t).bxSlider(e)},l=window.innerWidth<960&&window.innerWidth>640,h=window.innerWidth<640;n=c(l?o:h?r:a),enquire.register("screen and (min-width: 960px)",{match:function(){n.reloadSlider(a)}}),enquire.register("screen and (min-width: 640px) and (max-width: 960px)",{match:function(){n.reloadSlider(o)}}),enquire.register("screen and (max-width: 640px)",{match:function(){n.reloadSlider(r)}})}};t("#blog-slider","#blog-slider-prev","#blog-slider-next");var e=function(t,e,i){var n,s,o;if(s={pager:!1,prevSelector:e,nextSelector:i,nextText:"",prevText:"",minSlides:1,maxSlides:1,adaptiveHeight:!0},o=Object.assign({minSlides:1,maxSlides:1},s),$(t).length>0){var r;!function(){var e=function(e){return $(t).bxSlider(e)};r=window.innerWidth<640,r&&(n=e(s)),enquire.register("screen and (min-width: 640px)",{match:function(){void 0!==n&&n.destroySlider()}}),enquire.register("screen and (max-width: 640px)",{match:function(){void 0!==n?n.reloadSlider(s):n=e(s)}})}()}};e("#popular-slider","#popular-slider-prev","#popular-slider-next")}),$(document).ready(function(){!function(t,e){var i,n,s,o;i=$(t),s=i.outerHeight(),i.hide(),n=!1,o=$("#header"),o.children().clone().appendTo(i);var r=new GlobalDropdown({menu:"#sticky-header .headerMenu",menuitem:"[data-menu-link]",dropdown:"#sticky-header .dropdownMenu",copyMenu:!1});r.initialize();var a=new MobileMenu({menuCls:"#sticky-header .mobileMenu",openLinkCls:"#sticky-header .openMenuLink"});a.init();var c=new Accordion({selector:"#sticky-header .mobileMenu"});return c.init(),$(window).scroll(function(t){var s;s=$(t.target).scrollTop(),s>e&&!n?(i.css({top:-300,display:"block"}).addClass("is-fixed").animate({top:0},400),n=!0):e>=s&&n&&(i.animate({top:-300},400,"swing",function(){$(this).removeClass("is-fixed").css({display:"none"})}),n=!1)}),!1}("#sticky-header",300)});